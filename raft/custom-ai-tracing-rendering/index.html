<!DOCTYPE html>
<html>
  <head>
    <title>Logging to App Insights from Non-Azure Code – The World o' Curtis Mavis – Code, Music, Kids, Sleep</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="The Problem
We’ve seen the glory of App Insights.  We want the pretty charts, and all the deep tracking.  But we’re on a legacy system, not a cloud service running in Azure.  Are we forever out in the cold, looking through a window at the luxurious comfort within?
" />
    <meta property="og:description" content="The Problem
We’ve seen the glory of App Insights.  We want the pretty charts, and all the deep tracking.  But we’re on a legacy system, not a cloud service running in Azure.  Are we forever out in the cold, looking through a window at the luxurious comfort within?
" />
    
    <meta name="author" content="The World o' Curtis Mavis" />

    
    <meta property="og:title" content="Logging to App Insights from Non-Azure Code" />
    <meta property="twitter:title" content="Logging to App Insights from Non-Azure Code" />
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-75390437-1', 'auto');
  ga('send', 'pageview');

</script>

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="The World o' Curtis Mavis - Code, Music, Kids, Sleep" href="/feed.xml" />
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/jongriffin" class="site-avatar"><img src="/images/Curtis.png" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">The World o' Curtis Mavis</a></h1>
            <p class="site-description">Code, Music, Kids, Sleep</p>
          </div>

          <nav>
            <a href="/">Blog</a>
            <a href="/about">About</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">

	<div class="social-button">
		<a href="https://twitter.com/share" class="twitter-share-button" data-text="Logging to App Insights from Non-Azure Code" data-via="MartyIce" data-size="large">Tweet</a>
		<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  </div>
  <br />
  <div style="margin-top: 10px"/>
	<div class="social-button" >
    <script src="https://platform.linkedin.com/in.js" type="text/javascript">lang: en_US</script>
    <script type="IN/Share" data-url="http://localhost:4000/custom-ai-tracing-rendering/"></script>
  </div>

  <h1>Logging to App Insights from Non-Azure Code</h1>

  <div class="entry">
    <h3>The Problem</h3>
<p>We’ve seen the glory of App Insights.  We want the pretty charts, and all the deep tracking.  But we’re on a legacy system, not a cloud service running in Azure.  Are we forever out in the cold, looking through a window at the luxurious comfort within?</p>

<p>Of course not!  Microsoft has an <a href="https://docs.microsoft.com/en-us/azure/application-insights/app-insights-platforms">extensive list of libraries</a> that will push data to App Insights from a wide variety of application frameworks.  They also offer a <a href="https://dev.applicationinsights.io/">REST API</a> to query that data (similar to queries you can run within <a href="https://docs.microsoft.com/en-us/azure/application-insights/app-insights-analytics">App Insights Analytics</a>).</p>

<p>This post will narrate a <a href="https://github.com/MartyIce/AppInsightsDemo">small application</a> that demonstrates two things:</p>

<ul>
  <li>publishing custom info to App Insights (in this case, from javascript)</li>
  <li>querying App Insights and feeding the results into a “non-App-Insights” graphic solution (again, in javascript using a REST API and ChartJS)</li>
</ul>

<p>While the example is simple and somewhat meaningless, it should provide a starting point for developers looking to do REAL things with App Insights.</p>

<h3>Collecting Information</h3>

<p>Simply put, the <a href="https://github.com/Microsoft/ApplicationInsights-dotnet">App Insights SDK</a> allows us to send data to Azure App Insights.  There are several categories of information we can record:</p>

<ul>
  <li>Requests - timings, environment info, as well as custom telemetry info</li>
  <li>Exceptions - log all types of exceptions from an application</li>
  <li>Custom Events - collect anything under the sun about an application</li>
  <li>Custom Metrics - numbers, numbers, numbers, measure and track history.</li>
  <li>Performance Counters - performance logs from servers</li>
</ul>

<p>…and much more.  This information is covered in more detail <a href="https://docs.microsoft.com/en-us/azure/application-insights/app-insights-overview">here</a>.</p>

<p>The sample app uses the <a href="https://github.com/Microsoft/ApplicationInsights-JS">App Insights Javascript SDK</a> to send custom events to App Insights.  This can be accomplished with a few chunks of javascript…</p>

<h4>Javascript Chunk #1 - Initialization</h4>

<p>Using a garbled, impossible to read javascript snippet provided by Microsoft, we initialize our JS environment for writing to App Insights (and establish the <strong>window.appInsights</strong> variable in the process):</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">text/javascript</span><span class="dl">"</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nx">appInsights</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">appInsights</span> <span class="o">||</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">function</span> <span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span> <span class="nx">c</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">c</span><span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">})</span> <span class="p">}</span> <span class="p">}</span> <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="p">{</span> <span class="na">config</span><span class="p">:</span> <span class="nx">a</span> <span class="p">},</span> <span class="nx">d</span> <span class="o">=</span> <span class="nb">document</span><span class="p">,</span> <span class="nx">e</span> <span class="o">=</span> <span class="nb">window</span><span class="p">;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">script</span><span class="dl">"</span><span class="p">);</span> <span class="nx">b</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">url</span> <span class="o">||</span> <span class="dl">"</span><span class="s2">https://az416426.vo.msecnd.net/scripts/a/ai.0.js</span><span class="dl">"</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">"</span><span class="s2">script</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">});</span> <span class="k">try</span> <span class="p">{</span> <span class="nx">c</span><span class="p">.</span><span class="nx">cookie</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">cookie</span> <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span> <span class="nx">c</span><span class="p">.</span><span class="nx">queue</span> <span class="o">=</span> <span class="p">[];</span> <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">Event</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Exception</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Metric</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">PageView</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Trace</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Dependency</span><span class="dl">"</span><span class="p">];</span> <span class="nx">f</span><span class="p">.</span><span class="nx">length</span><span class="p">;)</span><span class="nx">b</span><span class="p">(</span><span class="dl">"</span><span class="s2">track</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">f</span><span class="p">.</span><span class="nx">pop</span><span class="p">());</span> <span class="k">if</span> <span class="p">(</span><span class="nx">b</span><span class="p">(</span><span class="dl">"</span><span class="s2">setAuthenticatedUserContext</span><span class="dl">"</span><span class="p">),</span> <span class="nx">b</span><span class="p">(</span><span class="dl">"</span><span class="s2">clearAuthenticatedUserContext</span><span class="dl">"</span><span class="p">),</span> <span class="nx">b</span><span class="p">(</span><span class="dl">"</span><span class="s2">startTrackEvent</span><span class="dl">"</span><span class="p">),</span> <span class="nx">b</span><span class="p">(</span><span class="dl">"</span><span class="s2">stopTrackEvent</span><span class="dl">"</span><span class="p">),</span> <span class="nx">b</span><span class="p">(</span><span class="dl">"</span><span class="s2">startTrackPage</span><span class="dl">"</span><span class="p">),</span> <span class="nx">b</span><span class="p">(</span><span class="dl">"</span><span class="s2">stopTrackPage</span><span class="dl">"</span><span class="p">),</span> <span class="nx">b</span><span class="p">(</span><span class="dl">"</span><span class="s2">flush</span><span class="dl">"</span><span class="p">),</span> <span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">disableExceptionTracking</span><span class="p">)</span> <span class="p">{</span> <span class="nx">f</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">onerror</span><span class="dl">"</span><span class="p">,</span> <span class="nx">b</span><span class="p">(</span><span class="dl">"</span><span class="s2">_</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">f</span><span class="p">);</span> <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">e</span><span class="p">[</span><span class="nx">f</span><span class="p">];</span> <span class="nx">e</span><span class="p">[</span><span class="nx">f</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">h</span><span class="p">)</span> <span class="p">{</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">g</span> <span class="o">&amp;&amp;</span> <span class="nx">g</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">h</span><span class="p">);</span> <span class="k">return</span> <span class="o">!</span><span class="mi">0</span> <span class="o">!==</span> <span class="nx">i</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">[</span><span class="dl">"</span><span class="s2">_</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">f</span><span class="p">](</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">h</span><span class="p">),</span> <span class="nx">i</span> <span class="p">}</span> <span class="p">}</span> <span class="k">return</span> <span class="nx">c</span>
    <span class="p">}({</span>
        <span class="na">instrumentationKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">@ViewData.Model.AppInsightsKey</span><span class="dl">'</span>
    <span class="p">});</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">appInsights</span> <span class="o">=</span> <span class="nx">appInsights</span><span class="p">,</span> <span class="nx">appInsights</span><span class="p">.</span><span class="nx">queue</span> <span class="o">&amp;&amp;</span> <span class="mi">0</span> <span class="o">===</span> <span class="nx">appInsights</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">appInsights</span><span class="p">.</span><span class="nx">trackPageView</span><span class="p">();</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div>

<p>Note the “instrumentationKey” value is obtained from the App Insight instance within Azure Portal, and is populated here by an MVC view model variable.</p>

<h4>Javascript Chunk #2 - Writing the Event</h4>

<p>With the <strong>appInsights</strong> variable established, we can use it to write all the different types of information to App Insights.  In this example, the code is logging a custom event containing “clickCount” and a message (from within a Vue click handler):</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">this</span><span class="p">.</span><span class="nx">clickCount</span><span class="o">++</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">properties</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">appInsightsMessage</span> <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">metrics</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">clickCount</span><span class="dl">"</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">clickCount</span> <span class="p">};</span>
    <span class="nx">appInsights</span><span class="p">.</span><span class="nx">trackEvent</span><span class="p">(</span><span class="dl">"</span><span class="s2">IndexClick</span><span class="dl">"</span><span class="p">,</span> <span class="nx">properties</span><span class="p">,</span> <span class="nx">metrics</span><span class="p">);</span>
    <span class="nx">appInsights</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>
</code></pre></div></div>

<p>Here’s what the (incredibly simple) UI looks like after clicking a few times:</p>

<p>
<img src="/images/custom-ai-tracing-rendering/recording-clicks.png" alt="Recording Clicks" style="border:1px solid black" /><br />
<em>Recording Clicks</em>
</p>

<h3>Querying Data</h3>

<p>App Insight’s visualization capabilities are extensive, but don’t currently support embedding an charts in an external system (I believe the MSFT recommendation is <a href="https://docs.microsoft.com/en-us/azure/application-insights/app-insights-export-power-bi">exporting to Power BI</a>).  However, they do support a <a href="https://dev.applicationinsights.io/">REST API</a> that can retrieve all the data, and with the plethora of javascript charting/graphing solutions, it’s fairly straightforward wiring something up yourself.  These examples are using the <a ref="https://github.com/axios/axios">Axios</a> JS library to invoke REST API calls.</p>

<h4>Javascript Chunk #3 - Establish Axios Bits</h4>

<p>To begin, we’ll setup a variable that contains the necessary “base” information for our query to the App Insights REST API:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// Establish our "base" URL, complete with App Insights keys provided by MVC View Model variable:</span>
    <span class="nx">appInsightsUrl</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
        <span class="na">baseURL</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.applicationinsights.io/v1/apps/@ViewData.Model.AppInsightsApplicationId</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">x-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">@ViewData.Model.AppInsightsRestApiKey</span><span class="dl">'</span>
        <span class="p">}</span>
    <span class="p">});</span>
</code></pre></div></div>

<p>Again, the keys are obtained from the App Insight instance within Azure Portal, and are populated with MVC view model variables.</p>

<h4>Javascript Chunk #4 - Querying with REST API</h4>

<p>And within another Vue click event handler, we can do the following to query App Insights:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">var</span> <span class="nb">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nb">self</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="c1">// Query is a URL encoded represetion of "customEvents | order by timestamp desc", and the "timespan" parameter</span>
    <span class="c1">//  limits results to past 24 hours.</span>
    <span class="nx">appInsightsUrl</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">query?timespan=PT24H&amp;query=customEvents%20|%20order%20by%20timestamp%20desc</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">events</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">tables</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">rows</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">i</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="na">timestamp</span><span class="p">:</span> <span class="nx">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="na">clickCount</span><span class="p">:</span> <span class="nx">i</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="p">?</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="mi">4</span><span class="p">]).</span><span class="nx">clickCount</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">?</span><span class="dl">"</span><span class="p">,</span>
                    <span class="na">message</span><span class="p">:</span> <span class="nx">i</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">?</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="mi">3</span><span class="p">]).</span><span class="nx">message</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">?</span><span class="dl">"</span>
                <span class="p">}</span>
            <span class="p">});</span>
            <span class="nb">self</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nb">self</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">});</span>
</code></pre></div></div>

<p>Here’s a screenshot of the sample app, complete with a list of App Insights goodness:</p>

<p>
<img src="/images/custom-ai-tracing-rendering/simple-ai-render.png" alt="Simple App Insights Rendering Goodness" style="border:1px solid black" /><br />
<em>Simple App Insights Rendering Goodness</em>
</p>

<h3>Visualizing Data</h3>

<p>While the data we store and retrieve from App Insights can be very useful by itself, what’s the point if we don’t have a shiny, pretty graph?  This is easy to do with all the javascript libraries available.  For this example, I used <a href="https://www.chartjs.org/">Chart JS</a>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="nx">drawChart</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="c1">// Render a chart from our app insights data</span>
                <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">myChart</span><span class="dl">"</span><span class="p">).</span><span class="nx">getContext</span><span class="p">(</span><span class="dl">'</span><span class="s1">2d</span><span class="dl">'</span><span class="p">);</span>
                <span class="k">new</span> <span class="nx">Chart</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="p">{</span>
                    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">line</span><span class="dl">'</span><span class="p">,</span>
                    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
                        <span class="na">datasets</span><span class="p">:</span> <span class="p">[</span>
                            <span class="p">{</span>
                                <span class="na">label</span><span class="p">:</span> <span class="dl">'</span><span class="s1">App Insights Clicks</span><span class="dl">'</span><span class="p">,</span>
                                <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#00FF00</span><span class="dl">"</span><span class="p">,</span>
                                <span class="na">borderColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#0000FF</span><span class="dl">"</span><span class="p">,</span>
                                <span class="c1">// Map data to fit what chartJS timeline is expecting</span>
                                <span class="na">data</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="p">{</span>
                                        <span class="k">return</span> <span class="p">{</span>
                                            <span class="na">x</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">timestamp</span><span class="p">),</span>
                                            <span class="na">y</span><span class="p">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clickCount</span>
                                        <span class="p">};</span>
                                    <span class="p">})</span>
                            <span class="p">}</span>
                            <span class="p">]</span>
                    <span class="p">},</span>
                    <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
                        <span class="na">scales</span><span class="p">:</span> <span class="p">{</span>
                            <span class="na">xAxes</span><span class="p">:</span> <span class="p">[{</span>
                                <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">time</span><span class="dl">'</span><span class="p">,</span>
                                <span class="na">distribution</span><span class="p">:</span> <span class="dl">'</span><span class="s1">linear</span><span class="dl">'</span>
                            <span class="p">}]</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">});</span>

            <span class="p">}</span>
</code></pre></div></div>

<p>And the colorful, vibrant result!</p>

<p>
<img src="/images/custom-ai-tracing-rendering/graphed-ai-render.png" alt="Wonderful, Snappy Graphics!" style="border:1px solid black" /><br />
<em>Wonderful, Snappy Graphics!</em>
</p>

<p>While this example is a bit silly, it should illustrate how App Insights data can be captured and displayed.  There’s something so satisfying about rendering these graphics!</p>

<h3>From here...</h3>

<p>Hopefully this sample exercise lends some ideas towards how to use App Insights to capture application data, and render it in a useful manner in a custom application.  Thanks for reading!</p>

  </div>

  <div class="date">
    Written on August 15, 2018
  </div>

  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'martymavis';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          
<a href="mailto:marty.mavis@gmail.com"><i class="svg-icon email"></i></a>
<a href="https://www.facebook.com/MartyIce"><i class="svg-icon facebook"></i></a>

<a href="https://github.com/MartyIce"><i class="svg-icon github"></i></a>

<a href="https://www.linkedin.com/in/martymavis"><i class="svg-icon linkedin"></i></a>


<a href="https://www.twitter.com/MartyIce"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/18453/marty"><i class="svg-icon stackoverflow"></i></a>
<a href="https://youtube.com/user/CurtisMavis"><i class="svg-icon youtube"></i></a>

        </footer>
      </div>
    </div>

    
  </body>
</html>
