---
layout: post
title: Svelte - Tutorial Walkthrough
tweetText: A play-by-play of the experience of walking through Svelte's delightful online tutorial
---

<h3>Svelte</h3>
[Svelte][svelte] is a [reactive][reactive] Javascript framework that hit the scene a few years ago.  Svelte differs from other reactive frameworks in that it builds the reactivity in the build/compile stage, rather than relying on the Virtual DOM running in the browser.  This results in a smaller download, and typically a faster runtime experience.  This post will walk through their awesome [tutorial][svelte tutorial].  I provide some of my own examples, but often just copy some of the code directly from the Svelte tutorial.

Note - I'm happy you're here reading, and I hope to provide a brief walkthrough of building Svelte components.  But their tutorial is really fantastic, if what's here appeals to you, please check it out.

<h3>Getting Started</h3>

The Svelte tutorial follows a format I've seen in the past, with instructions on the left and a javascript sandbox on the right.  I'm occasionally blown away at how far this "sandbox" concept has come along - something very meta about using elegant to teach elegant javascript.  A cool feature for those that like to look under the hood is the "JS Output" and "CS Output" tabs in the lower right.  With these, you can see the actual javascript generated by the Svelte compiler.  Very useful for gaining a deeper understanding of what's happening.

<h3>Introduction</h3>

<h4>Binding</h4>

Out of the gate, the introduction introduces [simple binding][tutorial simple binding].  Using something like the following, you can easily bind variables to HTML:

<p class="codeblock-label">Simple Binding Example</p>
```javascript
<script>
	let name = 'world';
</script>

<h1>Hello {name}!</h1>
```

Pretty self explanatory.  Looking at the underlying JS output, it gets a little hairy, but thankfully I don't need to understand the raw JS (yet).

<h4>A11y</h4>

A discovery made in this [section][tutorial dynamic attributes] - Svelte's compiler will warn you if you're missing [A11y][a11y] (accessibility) tags.  This is a thoughtful inclusion to the framework.  A11y is often overlooked, but the people who depend on it benefit so greatly from it.  Kudos to the Svelte team for prioritizing this feature.

<p><img src="/images/svelte/a11y.png" alt="Accessibility is important to Svelte" title="Accessibility is important to Svelte" /></p>

<h4>Styling</h4>

[Styling][tutorial styling] in Svelte is straightforward - in its simplest form, just drop a style block within your component.  These component level style blocks are scoped to the component, so they won't overwrite styles elsewhere.  Nice encapsulation.

<h4>Nested Components</h4>
[Nested Components][tutorial nested components] allow you to build a hierarchy of components, allowing you to keep your components small and singular.  This promotes re-use and avoids code sprawl.

<p class="codeblock-label">Child.svelte</p>
```javascript
<script>
	let coolVariable = 'cool'
</script>
```

<p class="codeblock-label">Parent.svelte</p>
```javascript
<script>
	let parentResponsibilities = 10000;
</script>
<Child />
```

<h4>Making an App</h4>
The introduction [wraps up][tutorial making app] with an overview of how to take these simple concepts, and build an actual app.  Example build tools, and code editors are suggested.  At this point in the tutorial, you probably have enough under your built to begin playing around with things.  But there's alot more power to uncover...

<h3>Reactivity</h3>

Now that the rudimentary basics are covered, the tutorial dives into reactivity.  This is where the framework really supercharges things, and it's quickly apparent why "reactivity" is so prevalent in modern Javascript development.  Once you go reactive, you won't go back (tive?)

<h4>Assignments</h4>

The [assignments][tutorial assignments] section provides a simple example of binding an event handler to a button, and incrementing a variable.  It also briefly mentions that when you assign a variable within Svelte, it *instruments* the assignment.  This is a key feature of the Svelte framework, and one that makes it so easy to use.  I can write code like this:

<p class="codeblock-label">Svelte Assignment</p>
```javascript
	count += 1;
```

And under the covers, the Svelte compiler produces this:

<p class="codeblock-label">Compiled Javascript</p>
```javascript
    $$invalidate(0, count += 1);
```

Ugly framework boilerplate is hidden from view, but it allows my app to be fluidly reactive.  It feels like the best of both worlds - simple javascript, powerful runtime.

<h4>Reactive Declarations</h4>

There are often assignments in javascript that aren't quite so simple - for example, if you have a value *based* on another value, like the following (copied liberally from the Svelte tutorial):

<p class="codeblock-label">Non-Reactive Variable</p>
```javascript
let count = 0;
doubled = count * 2;
```

While Svelte can "automatically instrument" the first line, the second line is more challenging.  Svelte overcomes this with a custom syntax, hijacking the Javascript "labeled statement":

<p class="codeblock-label">Reactive Variable</p>
```javascript
let count = 0;
$: doubled = count * 2;
```

How badass is that?  Still using standard Javascript (with a little to never-used operator), but it takes on power all its on within Svelte.  Looking at the generated Javascript, we can see some intense boilerplate code we never need to worry about:

<p class="codeblock-label">Intense Compiled Javascript</p>
```javascript
	$$self.$$.update = () => {
		if ($$self.$$.dirty & /*count*/ 1) {
			$: $$invalidate(1, doubled = count * 2);
		}
	};
```

<h4>Reactive Statements</h4>

[Reactive Statements][tutorial reactive statements] take this concept even further, allowing us to designate entire blocks of code as "reactive".  Here's an example from the tutorial:

<p class="codeblock-label">Reactive Statement</p>
```javascript
$: if (count >= 10) {
	alert(`count is dangerously high!`);
	count = 9;
}
```

This is super cool - in addition to having the screen update in response to a value change, we can now trigger blocks of code based on a value.

<h4>Updating Arrays and Objects</h4>

WIth more complicated scenarios involving [objects and arrays][tutorial arrays objects], there are some additional considerations for ensuring reactivity.  It's nothing horribly complicated, but they don't work *quite* as easily as simple values.  

With arrays, you can't simply modify the contents of the array (push, splice, etc).  This alone doesn't give the Svelte compiler enough context to recognize a reactive update.  One simple (but inelegant) fix is to assign the variable to itself after modifying:

<p class="codeblock-label">Inelegant Array Updating</p>
```javascript
function addNumber() {
	numbers.push(numbers.length + 1);
	numbers = numbers;
}
```

However, there is a more [idiomatic][idiomatic] solution that uses the [spread syntax][spread syntax] to update an array.  Here's an example of where a "pop" can be replaced with spread syntax (special thanks to [this post][immutable array operations] for all the immutable array manipulation examples):

<p class="codeblock-label">Pop Replacement</p>
```javascript
function removeNumber() {
	numbers = [...numbers.slice(0, numbers.length - 1)];
}
```

This gives us immutable arrays, valuable for performance and debuggability.  [Immuutability][immutability] is a topic that comes up pretty quickly when talking about reactive frameworks - probably worth a future post or two entirely devoted to this topic!

The Svelte tutorial mentions a good rule of thumb for determing whether an assignment will trigger "reactivity":  The name of the updated variable must appear on the left hand side of the assignment.  

This feels like an area where some simple mistakes might be made as you're learning the framework.  Good to make note of this and be on the lookout as you're coding.

<h3>Props</h3>

While encapsulation of state and functionality within components is desirable, it's hard to build anything meaningful without components interacting with each other.  Properties, or "Props", are how Svelte components share data.

<h4>Declaring Props</h4>

Props are declared in Svelte by prepending variables with the "export" keyword, eg:

<p class="codeblock-label">Child.svelte</p>
```javascript
<script>
	export let counter;
</script>
```

<p class="codeblock-label">Parent.svelte</p>
```javascript
<Child counter={4} />
```

This is a bit of an unusal use of the [export][export] statement.  Similar to "$", Svelte makes use of an existing keyword to accomplish its goals with native javascript.

<h4>Default Values</h4>

Props can be assigned default value in its declaration:

<p class="codeblock-label">Child.svelte</p>
```javascript 
<script>
	export let counter = 10;
</script>
```

Which means if "Parent" doesn't pass the value, it will default.

<p class="codeblock-label">Parent.svelte</p>
```javascript 
<Child /> // "counter" is now defaulted to 10.
```

<h5>Spread Props</h5>

If your code uses an object to maintain state, you can pass this object to a nested component using "spread":

<p class="codeblock-label">Spread Syntax</p>
```javascript 
<Child {...stateObject} />
```

This eliminates the need to pass multiple values to a child component with individual property assignemnts.

<h3>Thoughts & Notes</h3>

* Special thanks to [this guy][john allbritten] for the code markdown styling suggestion.

[svelte]: https://svelte.dev
[reactive]: https://en.wikipedia.org/wiki/Reactive_programming
[svelte tutorial]: https://svelte.dev/tutorial/basics
[a11y]: https://www.a11yproject.com/
[tutorial simple binding]: https://svelte.dev/tutorial/adding-data
[tutorial dynamic attributes]: https://svelte.dev/tutorial/dynamic-attributes
[tutorial styling]: https://svelte.dev/tutorial/styling
[tutorial nested components]: https://svelte.dev/tutorial/nested-components
[tutorial making app]: https://svelte.dev/tutorial/making-an-app
[tutorial assignments]: https://svelte.dev/tutorial/reactive-assignments
[tutorial reactive declarations]: https://svelte.dev/tutorial/reactive-declarations
[tutorial reactive statements]: https://svelte.dev/tutorial/reactive-statements
[tutorial arrays objects]: https://svelte.dev/tutorial/updating-arrays-and-objects
[export]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export
[tutorial props]: https://svelte.dev/tutorial/declaring-props
[tutorial prop defaults]: https://svelte.dev/tutorial/default-values
[tutorial spread props]: https://svelte.dev/tutorial/spread-props
[john allbritten]: https://thesynack.com/posts/codeblock-labels-markdown/
[idiomatic]: https://medium.com/swlh/idiomatic-code-a73f17f0f287
[spread syntax]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax
[immutable array examples]: https://blog.agney.dev/immutable-array-operations/
[immutability]: https://dzone.com/articles/immutability-in-javascriptwhy-and-when-should-you